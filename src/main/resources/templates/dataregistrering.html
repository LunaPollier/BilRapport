<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Bilabonnement</title>
    <link rel="stylesheet" href="../static/css/dataregistrering.css" th:href="@{css/dataregistrering.css}">
</head>
<body>
<section class="header">
    <div class="logo">
        <a th:href="@{https://bilabonnement.dk/}" class="logo">
            <img src="../static/img/bil.png" th:src="@{img/bil.png}" width="30%" height="30%" alt="logo1">
        </a>
    </div>
    <div class="form-container">
        <form id="opret-form" action="/submit-your-opret-path" method="POST">
            <a href="forside.html" class="back-to-home">Gå tilbage til forside</a>
        </form>
    </div>
</section>
<h1>Data registrering</h1>
<form id="dataregistrering-form">
    <input type="text" id="fornavn" name="fornavn" placeholder="Fornavn" required>
    <input type="text" id="efternavn" name="efternavn" placeholder="Efternavn" required>
    <input type="text" id="stelnummer" name="stelnummer" placeholder="Stelnummer" required>
    <input type="text" id="bilModel" name="bilModel" placeholder="Bil model" required>

    <label for="bilMærke">Vælg bilmærke:</label>
    <select id="bilMærke" name="bilMærke" required>
        <option value="Toyota">Toyota</option>
        <option value="Ford">Ford</option>
        <option value="Volkswagen">Volkswagen</option>
        <option value="BMW">BMW</option>
        <option value="Mercedes">Mercedes</option>
        <!-- Tilføj flere bilmærker her -->
    </select>

    <input type="date" id="lejeStartDato" name="lejeStartDato" required>
    <input type="date" id="lejeSlutDato" name="lejeSlutDato" required>
    <button type="submit">Opret leje aftale</button>
</form>

<footer>
    <section class="footer">
        <p><strong> Bilabonnement A/S </strong></p>
        <p> Vibeholmsvej 31 2605 Brøndby CVR-nr. 37856827</p>
    </section>
</footer>

<script>
    document.getElementById('dataregistrering-form').addEventListener('submit', function(event) {
        event.preventDefault(); // Forhindre standard form indsendelse

        const formData = {
            stelNummer: document.getElementById('stelnummer').value,
            navn: document.getElementById('fornavn').value,
            efternavn: document.getElementById('efternavn').value,
            bilModel: parseInt(document.getElementById('bilModel').value),
            bilMærke: document.getElementById('bilMærke').value,
            LejeStartDato: document.getElementById('lejeStartDato').value,
            LejeSlugDato: document.getElementById('lejeSlutDato').value
        };

        fetch('http://localhost:8080/dataregistrering/opret-lejeaftale', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(formData)
        })
            .then(response => {
                if (response.ok) {
                    alert('Lejeaftale oprettet succesfuldt!');
                } else {
                    return response.text().then(text => { throw new Error(text); });
                }
            })
            .catch(error => {
                console.error('Der opstod en fejl:', error);
                alert('Der opstod en fejl: ' + error.message);
            });
    });
</script>

</body>
</html>
